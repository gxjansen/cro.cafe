---
import { getCollection } from 'astro:content';
import PageLayout from '~/layouts/PageLayout.astro';
import Hero from '~/components/widgets/Hero.astro';
import Grid from '~/components/episode/Grid.astro';

const metadata = {
  title: 'CRO.CAFE - El Podcast de Optimización de Conversión',
  description: 'Tu podcast sobre Optimización de Tasa de Conversión.',
};

const availableLanguages = ['en', 'de', 'es', 'nl'];

// Get Spanish episodes
const episodes = await getCollection('es-episodes');

// Spanish show ID from Transistor
const spanishShowId = '16111';
---

<PageLayout {...{ metadata, availableLanguages, currentLang: 'es' }}>
  <Hero
    title="Bienvenido a CRO.CAFE"
    subtitle="Tu podcast sobre Optimización de Tasa de Conversión"
  />

  {/* Latest Episodes */}
  <section class="py-12">
    <div class="container mx-auto">
      <h2 class="text-3xl font-bold mb-8 text-center">Últimos Episodios</h2>
      <Grid
        episodes={episodes}
        limit={6}
        showId={spanishShowId}
        orderBy="published_at"
        orderDirection="desc"
        button={{
          show: true,
          text: "Cargar Más Episodios",
          link: "/es/episodes"
        }}
      />
    </div>
  </section>
</PageLayout>
