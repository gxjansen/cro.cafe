---
import Layout from '~/layouts/Layout.astro';
import Header from '~/components/widgets/Header.astro';
import Footer from '~/components/widgets/Footer.astro';

import { getHeaderData, getFooterData } from '~/navigation';
import type { MetaData } from '~/types';

export interface Props {
  metadata?: MetaData;
  availableLanguages: string[];
  currentLang?: 'en' | 'de' | 'es' | 'nl';
}

const { metadata, availableLanguages, currentLang = 'en' } = Astro.props;

// Prepare props objects to avoid string interpolation issues
const layoutProps = {
  metadata,
  availableLanguages,
  currentLang,
};

const headerProps = {
  ...getHeaderData(currentLang),
  isSticky: true,
  showToggleTheme: true,
  currentLang,
};

const footerProps = {
  ...getFooterData(currentLang),
  currentLang,
};
---

<Layout {...layoutProps}>
  <Header {...headerProps} />
  <slot />
  <Footer {...footerProps} />
</Layout>
