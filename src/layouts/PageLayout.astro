---
import Layout from '~/layouts/Layout.astro';
import Header from '~/components/widgets/Header.astro';
import Footer from '~/components/widgets/Footer.astro';

import { getHeaderData, getFooterData } from '~/navigation';
import type { PageProps } from '~/types';

type Language = 'en' | 'nl' | 'de' | 'es';

export interface Props extends PageProps {
  currentLang: Language;
  availableLanguages: readonly Language[];
}

const { metadata, availableLanguages, currentLang } = Astro.props;

// Prepare props objects to avoid string interpolation issues
const layoutProps = {
  metadata,
  availableLanguages,
  currentLang,
};

const headerProps = {
  ...getHeaderData(currentLang),
  isSticky: true,
  showToggleTheme: true,
  currentLang,
};

const footerProps = {
  ...getFooterData(currentLang),
  currentLang,
};
---

<Layout {...layoutProps}>
  <Header {...headerProps} />
  <slot />
  <Footer {...footerProps} />
</Layout>
