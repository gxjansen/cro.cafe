---
import Layout from '~/layouts/Layout.astro';
import Header from '~/components/widgets/Header.astro';
import Footer from '~/components/widgets/Footer.astro';

import { getHeaderData, getFooterData } from '~/navigation';
import type { MetaData } from '~/types';

export interface Props {
  metadata?: MetaData;
  availableLanguages: readonly ('en' | 'nl' | 'de' | 'es')[];
  currentLang?: 'en' | 'de' | 'es' | 'nl';
}

const props = Astro.props;

// Prepare props objects to avoid string interpolation issues
const layoutProps = {
  metadata: props.metadata,
  availableLanguages: props.availableLanguages,
  currentLang: props.currentLang || 'en',
};

const headerProps = {
  ...getHeaderData(props.currentLang || 'en'),
  isSticky: true,
  showToggleTheme: true,
  currentLang: props.currentLang || 'en',
};

const footerProps = {
  ...getFooterData(props.currentLang || 'en'),
  currentLang: props.currentLang || 'en',
};
---

<Layout {...layoutProps}>
  <Header {...headerProps} />
  <slot />
  <Footer {...footerProps} />
</Layout>
